# 基本知识

来源：[https://www.runoob.com/cplusplus/cpp-tutorial.html](https://www.runoob.com/cplusplus/cpp-tutorial.html)

## 基本数据类型

| 类型     | 关键字  | 描述                                              |      |
| :------- | :------ | ------------------------------------------------- | ---- |
| 布尔型   | bool    | true 或 false                                     |      |
| 字符型   | char    | 通常是一个字符（八位）这是一个整数类型            |      |
| 整型     | int     | 对机器而言，整数的最自然的大小                    |      |
| 浮点型   | float   | 单精度浮点值，1位符号，8位指数，23位小数          |      |
| 双浮点型 | double  | 双精度浮点值，双精度是1位符号，11位指数，52位小数 |      |
| 无类型   | void    | 表示类型的缺失                                    |      |
| 宽字符型 | wchar_t | 宽字符类型                                        |      |

- 一字节为 8 位
- 默认情况下，int、short、long都是带符号的，即 signed
- long int 8 个字节，int 都是 4 个字节

| 类型               | 位            | 范围                                                         |
| :----------------- | :------------ | :----------------------------------------------------------- |
| char               | 1 个字节      | -128 到 127 或者 0 到 255                                    |
| unsigned char      | 1 个字节      | 0 到 255                                                     |
| signed char        | 1 个字节      | -128 到 127                                                  |
| int                | 4 个字节      | -2147483648 到 2147483647                                    |
| unsigned int       | 4 个字节      | 0 到 4294967295                                              |
| signed int         | 4 个字节      | -2147483648 到 2147483647                                    |
| short int          | 2 个字节      | -32768 到 32767                                              |
| unsigned short int | 2 个字节      | 0 到 65,535                                                  |
| signed short int   | 2 个字节      | -32768 到 32767                                              |
| long int           | 8 个字节      | -9,223,372,036,854,775,808 到 9,223,372,036,854,775,807      |
| signed long int    | 8 个字节      | -9,223,372,036,854,775,808 到 9,223,372,036,854,775,807      |
| unsigned long int  | 8 个字节      | 0 到 18,446,744,073,709,551,615                              |
| float              | 4 个字节      | 精度型占4个字节（32位）内存空间，+/- 3.4e +/- 38 (~7 个数字) |
| double             | 8 个字节      | 双精度型占8 个字节（64位）内存空间，+/- 1.7e +/- 308 (~15 个数字) |
| long double        | 16 个字节     | 长双精度型 16 个字节（128位）内存空间，可提供18-19位有效数字。 |
| wchar_t            | 2 或 4 个字节 | 1 个宽字符                                                   |

## 修饰符类型

- signed
- unsigned
- long
- short

修饰符 **signed、unsigned、long 和 short** 可应用于整型，**signed** 和 **unsigned** 可应用于字符型，**long** 可应用于双精度型。

修饰符 **signed** 和 **unsigned** 也可以作为 **long** 或 **short** 修饰符的前缀。例如：**unsigned long int**。

C++ 允许使用速记符号来声明**无符号短整数**或**无符号长整数**。您可以不写 int，只写单词 **unsigned、short** 或 **long**，**int** 是隐含的。

## 类型限定符

| 限定符   | 含义                                                         |
| :------- | :----------------------------------------------------------- |
| const    | **const** 类型的对象在程序执行期间不能被修改改变。           |
| volatile | 修饰符 **volatile** 告诉编译器不需要优化volatile声明的变量，让程序可以直接从内存中读取变量。对于一般的变量编译器会对变量进行优化，将内存中的变量值放在寄存器中以加快读写效率。 |
| restrict | 由 **restrict** 修饰的指针是唯一一种访问它所指向的对象的方式。只有 C99 增加了新的类型限定符 restrict。 |

## typedef 声明

 **typedef** 为一个已有的类型取一个新的名字

```c++
typedef type newname; 
// 例如
typedef int feet;
feet distance;
```

## 枚举类型

枚举类型(enumeration)是C++中的一种派生数据类型，它是由用户定义的若干枚举常量的集合。

默认情况下，第一个名称的值为 0，第二个名称的值为 1，以此类推，也可为名称赋值

```c++
enum 枚举名{ 
     标识符[=整型常数], 
     标识符[=整型常数], 
... 
    标识符[=整型常数]
} 枚举变量;

// 例如
enum Color {
    red,
    green,
    blue=5,
    yellow
};

Color c1;
Color c2;
c1 = green;
c2 = yellow;
cout << c1 << endl; // 输出：1
cout << c2 << endl; // 输出：6
```

## 声明、初始化

```c++
// 声明
int    i, j, k;
char   c, ch;
float  f, salary;
double d;
// 声明 + 初始化
extern int d = 3, f = 5;    // d 和 f 的声明 
int d = 3, f = 5;           // 定义并初始化 d 和 f
byte z = 22;                // 定义并初始化 z
char x = 'x';               // 变量 x 的值为 'x'
```

| 数据类型 | 初始化默认值 |
| :------- | :----------- |
| int      | 0            |
| char     | '\0'         |
| float    | 0            |
| double   | 0            |
| pointer  | NULL         |

可以使用 **extern** 关键字在任何地方声明一个变量

## 定义常量

在 C++ 中，有两种简单的定义常量的方式：

- 使用 **#define** 预处理器
- 使用 **const** 关键字

```c++
#define LENGTH 10   
#define WIDTH  5
#define NEWLINE '\n'

const int  LENGTH = 10;
const int  WIDTH  = 5;
const char NEWLINE = '\n';
```

## 存储类

### static 存储类

**static** 存储类指示编译器在程序的生命周期内保持局部变量的存在，而不需要在每次它进入和离开作用域时进行创建和销毁。因此，使用 static 修饰局部变量可以在函数调用之间保持局部变量的值。

static 修饰符也可以应用于全局变量。**当 static 修饰全局变量时，会使变量的作用域限制在声明它的文件内。**

在 C++ 中，**当 static 用在类数据成员上时，会导致仅有一个该成员的副本被类的所有对象共享。**

### extern 存储类

**extern** 存储类用于提供一个全局变量的引用，全局变量对所有的程序文件都是可见的。当使用 extern 时，对于无法初始化的变量，会把变量名指向一个之前定义过的存储位置。

当您有多个文件且定义了一个可以在其他文件中使用的全局变量或函数时，可以在其他文件中使用 extern 来得到已定义的变量或函数的引用。可以这么理解，extern 是用来在另一个文件中声明一个全局变量或函数。

**extern 修饰符通常用于当有两个或多个文件共享相同的全局变量或函数的时候**

第一个文件：main.cpp

```c++
#include <iostream>
 
int count ;
extern void write_extern();
 
int main()
{
    count = 5;
    write_extern();
}
```

第二个文件：support.cpp

```c++
#include <iostream>
 
extern int count;
 
void write_extern(void)
{
    std::cout << "Count is " << count << std::endl;
}
```

编译一下

```shell
g++ main.cpp support.cpp -o write
./write
输出：Count is 5
```

### auto 存储类

自 C++ 11 以来，auto 关键字用于两种情况：声明变量时根据初始化表达式自动推断该变量的类型、声明函数时函数返回值的占位符。

C++98标准中auto关键字用于自动变量的声明，但由于使用极少且多余，在 C++17 中已删除这一用法。

根据初始化表达式自动推断被声明的变量的类型，如：

```c++
auto f=3.14;      //double
auto s("hello");  //const char*
auto z = new auto(9); // int*
auto x1 = 5, x2 = 5.0, x3='r';//错误，必须是初始化为同一类型
```

### mutable 存储类

**mutable** 说明符仅适用于类的对象，它允许对象的成员替代常量。也就是说，mutable 成员可以通过 const 成员函数修改。

### thread_local 存储类

使用 thread_local 说明符声明的变量仅可在它在其上创建的线程上访问。 变量在创建线程时创建，并在销毁线程时销毁。 每个线程都有其自己的变量副本。
