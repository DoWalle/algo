# 滑动窗口

参考：[我写了套框架，把滑动窗口算法变成了默写题](https://mp.weixin.qq.com/s/ioKXTMZufDECBUwRRp3zaA)

**窗口的数据结构**根据各种数据结构的特点

可以使用字典、优先队列（堆）、有序序列（红黑树）、双端队列

应用条件：**原数据必须满足单调性，不满足的可以用前缀和**。例如[560. 和为 K 的子数组](https://leetcode-cn.com/problems/subarray-sum-equals-k/)原数据中含有负数，破坏了单调性

思考：

1. 窗口怎么定义，窗口的长度能否设定
2. 达到窗口限定后，左边届该怎样收缩
3. 怎样采集结果

## 模版


```python
def 模板(s, t):
    size = len(s)
    left, right = 0, 0
    window = collections.defaultdict(int)
    need_match = xx 	# 窗口内需要满足的匹配数
    match = 0				# 当前窗口内的匹配数
    
    while right < size:
      	# 右窗口扩大
      	window[s[right]] += 1
        if s[right] 在窗口内达到所需条件:
            match += 1
        	
        while match == need_match:
            # 窗口突破限制后，左窗口收缩
            window[s[left]] -= 1
            left -= 1
            if s[left] 在窗口内不满足所需条件:
              match -= 1
        # 想要找最小/大窗口时
        max_len = max(max_len, right - left)
        right += 1
        
		return max_len
```



```c++
/* 滑动窗口算法框架 */
void slidingWindow(string s, string t) {
    unordered_map<char, int> need, window;
    for (char c : t) need[c]++;

    int left = 0, right = 0;
    int valid = 0; 
    while (right < s.size()) {
        // c 是将移入窗口的字符
        char c = s[right];
        // 右移窗口
        right++;
        // 进行窗口内数据的一系列更新
        ...

        /*** debug 输出的位置 ***/
        printf("window: [%d, %d)\n", left, right);
        /********************/

        // 判断左侧窗口是否要收缩
        while (window needs shrink) {
            // d 是将移出窗口的字符
            char d = s[left];
            // 左移窗口
            left++;
            // 进行窗口内数据的一系列更新
            ...
        }
    }
}
```

