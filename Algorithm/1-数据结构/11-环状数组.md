# 环状数组

## 1、任意位置为起点，循环遍历

例题：[134. 加油站](https://leetcode-cn.com/problems/gas-station/)

使用 `i = (i + 1) % n;` 模拟跑一圈的过程

```c++
class Solution {
public:
    int canCompleteCircuit(vector<int>& gas, vector<int>& cost) {
        int n = gas.size();
        for (int start = 0; start < n; start++) {
            int residual = 0;  // 到达 i 点时剩余的汽油（还没在 i 点加油）
            int i = start;
            int cnt = 0;  // 遇见起点的次数
            while (true) {
                if (i == start) cnt++;
                if (cnt == 2) break;      // 第二次遇见时跳出循环
                residual += gas[i];       // 在 i 点加油
                residual -= cost[i];      // 从 i 点开到 i+1 点剩下的油
                if (residual < 0) break;  // 开到下个位置后，检查下剩余油量
                i = (i + 1) % n;          // i 更新为下一个位置
            }
            // 跳出循环时，可能中途跳出，也可能第一个位置就不满足，所以还要判别下 cnt == 2
            if (i == start && cnt == 2) return start;
        }
        return -1;
    }
};
```

## 2、尾首拼接（断环成链）

例题：[2134. 最少交换次数来组合所有的 1 II](https://leetcode-cn.com/problems/minimum-swaps-to-group-all-1s-together-ii/)

如何处理环状数组: 将num再拼接一次，断环成链

```c++
int n = nums.size();
for (int i = 0; i < n; i++) {
    nums.push_back(nums[i]);
}
```

## 3、环状链表

参照双指针中，[环的相应算法](../2-算法基础/3-双指针.md)

